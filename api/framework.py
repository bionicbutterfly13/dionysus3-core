"""
Inner Architect System Framework
"""

IAS_FRAMEWORK = [
    {
        "id": 1,
        "title": "Breakthrough Mapping",
        "focus": "Self-Awareness",
        "phase": "REVELATION",
        "actions": [
            {
                "id": 1,
                "title": "Choose problematic behaviors, emotions, or patterns",
                "obstacles": [
                    "Overwhelm from Too Many Responsibilities",
                    "Fear of Confronting Personal Flaws",
                    "Difficulty Pausing to Reflect"
                ]
            },
            {
                "id": 2,
                "title": "Pinpoint how these choices are driven by underlying beliefs",
                "obstacles": [
                    "Beliefs Are Often Unconscious",
                    "Resistance to Letting Go",
                    "Connecting the Dots Requires Awareness"
                ]
            },
            {
                "id": 3,
                "title": "Name what the pattern protects emotionally",
                "obstacles": [
                    "Familiar Stories Feel Like Facts",
                    "Looking at the Impact Can Be Painful",
                    "Emotional Reactions Cloud the Process"
                ]
            }
        ]
    },
    {
        "id": 2,
        "title": "MOSAEIC Mind Gym",
        "focus": "Mental Agility",
        "phase": "REVELATION",
        "actions": [
            {
                "id": 1,
                "title": "Choose a context where you want to be more effective under pressure",
                "obstacles": [
                    "Selecting Relevant Contexts",
                    "Balancing Multiple High-Pressure Situations",
                    "Prioritizing Activities for Improvement"
                ]
            },
            {
                "id": 2,
                "title": "Apply the MOSAEIC technique",
                "obstacles": [
                    "Adapting to New Techniques",
                    "Maintaining Objectivity",
                    "Integrating Into Daily Routine"
                ]
            },
            {
                "id": 3,
                "title": "Track how your brain predicts what's safe",
                "obstacles": [
                    "Recognizing Self-Sabotaging Narratives",
                    "Evaluating Decision-Making Impact",
                    "Quantifying the Impact"
                ]
            }
        ]
    },
    {
        "id": 3,
        "title": "Replay Loop Breaker",
        "focus": "Emotional Clarity & Self-Regulation",
        "phase": "REVELATION",
        "actions": [
            {
                "id": 1,
                "title": "Spot the story behind your most frustrating replay pattern",
                "obstacles": [
                    "The Loop Feels Like 'Truth,' Not a Story",
                    "Everything Feels Frustrating, Making It Hard to Choose One Pattern",
                    "Fear of What You'll Find if You Look Closely"
                ]
            },
            {
                "id": 2,
                "title": "Label the feeling the story causes you to experience",
                "obstacles": [
                    "Feelings Blur Together into a Vague Sense of 'Bad'",
                    "Fear That Naming the Feeling Will Make It Worse",
                    "Confusing Emotion with Identity"
                ]
            },
            {
                "id": 3,
                "title": "Identify the protective prediction the replay is trying to fulfill",
                "obstacles": [
                    "Believing the Only 'Lesson' Is That You Were Wrong",
                    "Struggling to Find Anything Kind to Say to Yourself",
                    "All-or-Nothing Thinking About Outcomes"
                ]
            }
        ]
    },
    {
        "id": 4,
        "title": "Conviction Gauntlet",
        "focus": "Hope",
        "phase": "REPATTERNING",
        "actions": [
            {
                "id": 1,
                "title": "Review prioritized beliefs and associated narratives",
                "obstacles": [
                    "Revisiting Painful Narratives",
                    "Maintaining Objectivity",
                    "Integrating New Insights"
                ]
            },
            {
                "id": 2,
                "title": "Analyze origins and supporting 'evidence'",
                "obstacles": [
                    "Challenging Established Narratives",
                    "Identifying False Assumptions",
                    "Overcoming Confirmation Bias"
                ]
            },
            {
                "id": 3,
                "title": "Run an emotionally vivid mismatch experiment",
                "obstacles": [
                    "Creating Credible Alternatives",
                    "Implementing New Beliefs",
                    "Handling Setbacks"
                ]
            }
        ]
    },
    {
        "id": 5,
        "title": "Perspective Matrix",
        "focus": "Insight",
        "phase": "REPATTERNING",
        "actions": [
            {
                "id": 1,
                "title": "Identify and analyze current perspective",
                "obstacles": [
                    "Recognizing Biases",
                    "Acknowledging Limitations",
                    "Balancing Multiple Viewpoints"
                ]
            },
            {
                "id": 2,
                "title": "Explore alternative viewpoints and possibilities",
                "obstacles": [
                    "Seeking Diverse Opinions",
                    "Overcoming Fear of Change",
                    "Integrating New Insights"
                ]
            },
            {
                "id": 3,
                "title": "Dialogue between conflicting parts and realign",
                "obstacles": [
                    "Transforming Negative Narratives",
                    "Maintaining Consistency",
                    "Overcoming Initial Discomfort"
                ]
            }
        ]
    },
    {
        "id": 6,
        "title": "Vision Accelerator",
        "focus": "Inspiration",
        "phase": "REPATTERNING",
        "actions": [
            {
                "id": 1,
                "title": "Explore expanded possibilities",
                "obstacles": [
                    "Breaking Out of Comfort Zones",
                    "Generating Creative Ideas",
                    "Visualizing Success"
                ]
            },
            {
                "id": 2,
                "title": "Contrast outdated self-image with lived mismatches",
                "obstacles": [
                    "Overcoming Internal Resistance",
                    "Sustaining Momentum",
                    "Ensuring Long-Term Commitment"
                ]
            },
            {
                "id": 3,
                "title": "Design a vivid, values-aligned future scenario",
                "obstacles": [
                    "Balancing Realism and Creativity",
                    "Sustaining with Core Values",
                    "Implementing Vision into Action"
                ]
            }
        ]
    },
    {
        "id": 7,
        "title": "Habit Harmonizer",
        "focus": "Conviction",
        "phase": "STABILIZATION",
        "actions": [
            {
                "id": 1,
                "title": "Internalize new beliefs through structured reflection",
                "obstacles": [
                    "Maintaining Consistent Practice",
                    "Overcoming Doubts",
                    "Ensuring Authenticity"
                ]
            },
            {
                "id": 2,
                "title": "Apply new beliefs in real-life scenarios",
                "obstacles": [
                    "Translating Beliefs into Action",
                    "Handling Unexpected Outcomes",
                    "Sustaining Confidence"
                ]
            },
            {
                "id": 3,
                "title": "Track small protective relapses as feedback",
                "obstacles": [
                    "Designing an Effective Checklist",
                    "Integrating into Daily Routine",
                    "Adjusting the Checklist as Needed"
                ]
            }
        ]
    },
    {
        "id": 8,
        "title": "Execution Engine",
        "focus": "Momentum",
        "phase": "STABILIZATION",
        "actions": [
            {
                "id": 1,
                "title": "Create a personalized, testable action plan",
                "obstacles": [
                    "Developing Relevant Actions",
                    "Ensuring Feasibility",
                    "Balancing Multiple Goals"
                ]
            },
            {
                "id": 2,
                "title": "Anticipate challenges and plan supportive responses",
                "obstacles": [
                    "Anticipating Challenges",
                    "Developing Effective Responses",
                    "Maintaining Flexibility"
                ]
            },
            {
                "id": 3,
                "title": "Use feedback loops to refine action",
                "obstacles": [
                    "Engaging with Support Systems",
                    "Incorporating Constructive Criticism",
                    "Building a Reliable Support Network"
                ]
            }
        ]
    },
    {
        "id": 9,
        "title": "Growth Anchor",
        "focus": "Perseverance",
        "phase": "STABILIZATION",
        "actions": [
            {
                "id": 1,
                "title": "Build your sustainable personal growth system",
                "obstacles": [
                    "Designing a Sustainable Framework",
                    "Integrating with Daily Life",
                    "Measuring Progress Accurately"
                ]
            },
            {
                "id": 2,
                "title": "Reframe setbacks as predictive updates",
                "obstacles": [
                    "Embracing Change",
                    "Cultivating Flexibility",
                    "Managing Uncertainty"
                ]
            },
            {
                "id": 3,
                "title": "Curate your ongoing circle of support",
                "obstacles": [
                    "Identifying the Right Allies",
                    "Maintaining Strong Relationships",
                    "Leveraging Support for Continuous Growth"
                ]
            }
        ]
    }
]


def get_step(step_id: int) -> dict | None:
    """Get a specific step by ID."""
    for step in IAS_FRAMEWORK:
        if step["id"] == step_id:
            return step
    return None


def get_obstacle(step_id: int, action_id: int, obstacle_id: int) -> str | None:
    """Get a specific obstacle text."""
    step = get_step(step_id)
    if not step:
        return None
    for action in step["actions"]:
        if action["id"] == action_id:
            if 0 <= obstacle_id < len(action["obstacles"]):
                return action["obstacles"][obstacle_id]
    return None
