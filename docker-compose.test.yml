# Test database - pgvector only
# Neo4j handles graph storage, so AGE extension not needed locally
# This enables fast startup for TDD tests

services:
  test-db:
    image: pgvector/pgvector:pg16
    container_name: dionysus_test_db
    environment:
      POSTGRES_DB: dionysus_test
      POSTGRES_USER: dionysus
      POSTGRES_PASSWORD: dionysus2024
    ports:
      - "5434:5432"
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U dionysus -d dionysus_test"]
      interval: 5s
      timeout: 5s
      retries: 10
      start_period: 10s
    tmpfs:
      - /var/lib/postgresql/data  # RAM-backed for fast tests
